<div class="viewProductsMain">
  <div class="appLayoutHeader">
    <div class="appLayoutHeaderText d-flex justify-content-between align-items-center">
      <h5 class="fw-semibold m-0"> Products</h5>
      <div class="d-flex gap-3 align-items-center">
        <nb-form-field>
          <nb-icon nbSuffix class="cursor-pointer" icon="search-outline" pack="eva"
                   (click)="searchProducts()"></nb-icon>
          <input type="text" nbInput class="form-control"
                 [formControl]="productSearch"
                 (keyup.enter)="searchProducts()"
                 (keyup)="trimLeadingSpace($event)"
                 nbTooltip="After entering the data, click on enter or search icon" nbTooltipPlacement="bottom-start"
                 placeholder="Search by Product Name">
        </nb-form-field>
        <button nbButton size="small" *ngIf="whenSearch"
                (click)="loadProducts(); productSearch.setValue('')"
                nbTooltip="Reset the data" nbTooltipPlacement="bottom"
                class=" rounded-2 fw-semibold">
          <nb-icon icon="flip-2-outline"></nb-icon>
        </button>
        <button nbButton size="small"
                [routerLink]="['/products/add']"
                nbTooltip="By clicking this you can add the products" nbTooltipPlacement="bottom"
                class=" rounded-2 fw-semibold">
          <nb-icon icon="plus"></nb-icon>
        </button>
      </div>
    </div>
  </div>
  <div class="appLayoutBody">
    <div>
      <p-dataView class="bg-transparent mb-2" #dv [value]="products" [paginator]="true" [rows]="10" filterBy="brand"
                  layout="grid">
        <ng-template #list let-products pTemplate="gridItem">
          <div class="row m-0">
            <nb-card class="col-sm-12 col-md-3 col-lg-3 col-xl-3" *ngFor="let item of products; let first = first">
              <nb-card-header>
                <img src="{{item.images[0].url}}" alt="product" class="productImage">
              </nb-card-header>
              <nb-card-body>
                <div class="d-flex align-items-center justify-content-between">
                  <p class="fw-semibold m-0">{{item.name}}</p>
                </div>
                <div class="d-flex align-items-center justify-content-between">
                  <p class="fw-semibold m-0">Category: {{item.category.name}}</p>
                  <p class="fw-semibold m-0">Sub Category: {{item.subCategory.name}}</p>
                </div>
                <div class="d-flex align-items-center justify-content-between">
                  <p class="fw-semibold m-0">Price: {{item.price | currency:'INR':'symbol-narrow':'1.0-0'}}</p>
                  <p class="fw-semibold m-0">Quantity: {{item.quantity}}</p>
                </div>
                <div class="d-flex align-items-center justify-content-between">
                  <p class="fw-semibold m-0">Status: {{item.status ? 'Active' : 'Inactive'}}</p>
                </div>
              </nb-card-body>
            </nb-card>
          </div>
        </ng-template>
      </p-dataView>

      <app-no-data *ngIf="!products.length"></app-no-data>
    </div>
  </div>
</div>
